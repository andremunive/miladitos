<div class="cart">
  <div class="cart__overlay"></div>

  <a
    href="#"
    class="cart__back"
    aria-label="Volver"
    (click)="goBack(); $event.preventDefault()"
  >
    <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
      <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
    </svg>
  </a>

  <div class="cart__content">
    <header class="cart__header">
      <div class="cart__brand">
        <div class="cart__logo-wrap">
          <img src="assets/logo/logo.jpg" alt="Miladitos" class="cart__logo" />
        </div>
        <p class="cart__handle">@miladitos</p>
        <p class="cart__location">
          <svg class="cart__location-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
          </svg>
          Valledupar
        </p>
      </div>
      <h1 class="cart__title">Tu pedido</h1>
    </header>

    <section class="cart__list" *ngIf="items$ | async as items">
      <article *ngFor="let item of items" class="cart__card">
        <div class="cart__card-top">
          <div class="cart__card-image-wrap">
            <img [src]="item.image" [alt]="item.name" class="cart__card-image" />
          </div>
          <div class="cart__card-info">
            <h2 class="cart__card-title">{{ item.name }}</h2>
            <p class="cart__card-description">{{ item.description }}</p>
            <p class="cart__card-price">{{ formatPrice(getLineTotal(item)) }}</p>
          </div>
        </div>
        <div class="cart__card-actions">
          <div class="cart__quantity">
            <button
              type="button"
              class="cart__qty-btn"
              aria-label="Menos"
              [disabled]="item.quantity === 1"
              (click)="subtractOne(item)"
            >−</button>
            <span class="cart__qty-value">{{ item.quantity }}</span>
            <button
              type="button"
              class="cart__qty-btn"
              aria-label="Más"
              (click)="addOne(item)"
            >+</button>
          </div>
          <button
            type="button"
            class="cart__remove-btn"
            aria-label="Eliminar producto"
            (click)="removeItem(item)"
          >
            <svg class="cart__remove-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </svg>
            Eliminar
          </button>
        </div>
      </article>

      <p *ngIf="items.length === 0" class="cart__empty">No hay productos en tu pedido.</p>
    </section>
  </div>

  <footer class="cart__footer">
    <span class="cart__total" *ngIf="totalAmount$ | async as total">
      Total {{ formatPrice(total) }}
    </span>
    <ng-container *ngIf="cartCount$ | async as count">
      <a *ngIf="count > 0" routerLink="/checkout" class="cart__continue">Continuar</a>
      <span *ngIf="count === 0" class="cart__continue cart__continue--disabled">Continuar</span>
    </ng-container>
  </footer>
</div>
